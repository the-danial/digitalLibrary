<!DOCTYPE html>
<html dir="rtl" lang="fa">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>â˜ ï¸ Ù¾Ø§ÛŒØ§Ù† Ø¨Ø§Ø²ÛŒ | Startup Sandbox</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
    <script src="{{ url_for('static', filename='script.js') }}" defer></script>
    <style>
        .game-over-icon {
            font-size: 6rem;
            margin-bottom: var(--spacing-lg);
            animation: iconShake 1s ease-in-out infinite;
            display: block;
            filter: drop-shadow(0 0 20px rgba(239, 68, 68, 0.8));
        }
        
        @keyframes iconShake {
            0%, 100% { transform: rotate(0deg) scale(1); }
            25% { transform: rotate(-5deg) scale(1.1); }
            75% { transform: rotate(5deg) scale(1.1); }
        }
        
        .game-over-subtitle {
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-bottom: var(--spacing-xl);
            font-weight: 500;
        }
        
        .startup-name-highlight {
            color: var(--accent-cyan);
            font-weight: 700;
            text-shadow: 0 0 15px rgba(6, 182, 212, 0.6);
        }
        
        .failure-reason-box {
            background: rgba(239, 68, 68, 0.1);
            border: 2px solid rgba(239, 68, 68, 0.3);
            border-radius: 20px;
            padding: var(--spacing-lg);
            margin: var(--spacing-lg) 0;
            position: relative;
            overflow: hidden;
        }
        
        .failure-reason-box::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(239, 68, 68, 0.2) 0%, transparent 70%);
            border-radius: 50%;
            transform: translate(30%, -30%);
        }
        
        .failure-title {
            font-size: 1.5rem;
            color: var(--accent-red);
            margin-bottom: var(--spacing-md);
            font-family: 'Orbitron', sans-serif;
            text-shadow: 0 0 15px rgba(239, 68, 68, 0.6);
            position: relative;
            z-index: 1;
        }
        
        .failure-description {
            font-size: 1.1rem;
            color: var(--text-secondary);
            line-height: 1.8;
            position: relative;
            z-index: 1;
        }
        
        .final-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: var(--spacing-md);
            margin: var(--spacing-xl) 0;
        }
        
        .final-stat {
            background: rgba(0, 0, 0, 0.3);
            padding: var(--spacing-md);
            border-radius: 15px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .final-stat-label {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-bottom: var(--spacing-xs);
        }
        
        .final-stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            font-family: 'Orbitron', monospace;
            color: var(--accent-gold);
        }
        
        .restart-button {
            margin-top: var(--spacing-xl);
            text-align: center;
        }
        
        .lessons-learned {
            background: rgba(139, 92, 246, 0.1);
            border: 2px solid rgba(139, 92, 246, 0.3);
            border-radius: 20px;
            padding: var(--spacing-lg);
            margin: var(--spacing-lg) 0;
            text-align: right;
        }
        
        .lessons-title {
            font-size: 1.2rem;
            color: var(--accent-purple);
            margin-bottom: var(--spacing-md);
            font-weight: 700;
        }
        
        .lessons-text {
            color: var(--text-secondary);
            line-height: 1.8;
        }
    </style>
</head>
<body>
    <div class="game-over-container">
        <span class="game-over-icon">â˜ ï¸</span>
        <h1 class="game-over-title">Ø¨Ø§Ø²ÛŒ ØªÙ…Ø§Ù… Ø´Ø¯!</h1>
        
        <p class="game-over-subtitle">
            Ù…ØªØ§Ø³ÙØ§Ù†Ù‡ Ø§Ø³ØªØ§Ø±ØªØ§Ù¾ <span class="startup-name-highlight">{{ game['startup_name'] }}</span> Ø´Ú©Ø³Øª Ø®ÙˆØ±Ø¯.
        </p>
        
        <div class="failure-reason-box">
            <div class="failure-title">ğŸ’¥ Ø¹Ù„Øª Ø´Ú©Ø³Øª:</div>
            <div class="failure-description">
                {% if reasons %}
                    {% if 'BUDGET' in reasons %}
                        <strong style="color: var(--accent-red);">ğŸ’¸ ÙˆØ±Ø´Ú©Ø³ØªÚ¯ÛŒ Ù…Ø§Ù„ÛŒ</strong><br>
                        Ø¨ÙˆØ¯Ø¬Ù‡ Ø´Ù…Ø§ ØªÙ…Ø§Ù… Ø´Ø¯ Ùˆ Ø¯ÛŒÚ¯Ø± Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø¶Ø±ÙˆØ±ÛŒ Ø±Ø§ Ù¾Ø±Ø¯Ø§Ø®Øª Ú©Ù†ÛŒØ¯.
                        {% if 'REPUTATION' in reasons or 'MORALE' in reasons %}<br><br>{% endif %}
                    {% endif %}
                    {% if 'REPUTATION' in reasons %}
                        <strong style="color: var(--accent-red);">ğŸ˜¡ Ù†ÙØ±Øª Ø¹Ù…ÙˆÙ…ÛŒ</strong><br>
                        Ø´Ù‡Ø±Øª Ø´Ù…Ø§ Ø¨Ù‡ Ø­Ø¯ÛŒ Ú©Ø§Ù‡Ø´ ÛŒØ§ÙØª Ú©Ù‡ Ø¯ÛŒÚ¯Ø± Ú©Ø³ÛŒ Ø¨Ù‡ Ø´Ù…Ø§ Ø§Ø¹ØªÙ…Ø§Ø¯ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
                        {% if 'MORALE' in reasons %}<br><br>{% endif %}
                    {% endif %}
                    {% if 'MORALE' in reasons %}
                        <strong style="color: var(--accent-red);">ğŸ’” ÙØ±ÙˆÙ¾Ø§Ø´ÛŒ ØªÛŒÙ…</strong><br>
                        Ø±ÙˆØ­ÛŒÙ‡ ØªÛŒÙ… Ø´Ù…Ø§ Ø¨Ù‡ Ø­Ø¯ÛŒ Ú©Ø§Ù‡Ø´ ÛŒØ§ÙØª Ú©Ù‡ Ø¯ÛŒÚ¯Ø± Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ú©Ø§Ø± Ú©Ù†Ù†Ø¯. Ø§Ø¹Ø¶Ø§ÛŒ ØªÛŒÙ… Ø§Ø³ØªØ¹ÙØ§ Ø¯Ø§Ø¯Ù‡â€ŒØ§Ù†Ø¯ Ùˆ Ù¾Ø±ÙˆÚ˜Ù‡ Ù…ØªÙˆÙ‚Ù Ø´Ø¯Ù‡ Ø§Ø³Øª.
                    {% endif %}
                {% elif game['budget'] <= 0 %}
                    <strong style="color: var(--accent-red);">ğŸ’¸ ÙˆØ±Ø´Ú©Ø³ØªÚ¯ÛŒ Ù…Ø§Ù„ÛŒ</strong><br>
                    Ø¨ÙˆØ¯Ø¬Ù‡ Ø´Ù…Ø§ ØªÙ…Ø§Ù… Ø´Ø¯ Ùˆ Ø¯ÛŒÚ¯Ø± Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø¶Ø±ÙˆØ±ÛŒ Ø±Ø§ Ù¾Ø±Ø¯Ø§Ø®Øª Ú©Ù†ÛŒØ¯.
                {% elif game['reputation'] <= 0 %}
                    <strong style="color: var(--accent-red);">ğŸ˜¡ Ù†ÙØ±Øª Ø¹Ù…ÙˆÙ…ÛŒ</strong><br>
                    Ø´Ù‡Ø±Øª Ø´Ù…Ø§ Ø¨Ù‡ Ø­Ø¯ÛŒ Ú©Ø§Ù‡Ø´ ÛŒØ§ÙØª Ú©Ù‡ Ø¯ÛŒÚ¯Ø± Ú©Ø³ÛŒ Ø¨Ù‡ Ø´Ù…Ø§ Ø§Ø¹ØªÙ…Ø§Ø¯ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
                {% elif game['morale'] <= 0 %}
                    <strong style="color: var(--accent-red);">ğŸ’” ÙØ±ÙˆÙ¾Ø§Ø´ÛŒ ØªÛŒÙ…</strong><br>
                    Ø±ÙˆØ­ÛŒÙ‡ ØªÛŒÙ… Ø´Ù…Ø§ Ø¨Ù‡ Ø­Ø¯ÛŒ Ú©Ø§Ù‡Ø´ ÛŒØ§ÙØª Ú©Ù‡ Ø¯ÛŒÚ¯Ø± Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ú©Ø§Ø± Ú©Ù†Ù†Ø¯.
                {% else %}
                    <strong style="color: var(--accent-red);">âš ï¸ Ø´Ø±Ø§ÛŒØ· Ø¨Ø­Ø±Ø§Ù†ÛŒ</strong><br>
                    ØªØ±Ú©ÛŒØ¨ Ù…Ø´Ú©Ù„Ø§Øª Ù…Ø§Ù„ÛŒØŒ Ú©Ø§Ù‡Ø´ Ø´Ù‡Ø±Øª Ùˆ ÙØ±ÙˆÙ¾Ø§Ø´ÛŒ Ø±ÙˆØ­ÛŒÙ‡ ØªÛŒÙ… Ø¨Ø§Ø¹Ø« Ù¾Ø§ÛŒØ§Ù† Ø¨Ø§Ø²ÛŒ Ø´Ø¯.
                {% endif %}
            </div>
        </div>

        <div class="final-stats">
            <div class="final-stat">
                <div class="final-stat-label">ğŸ“… Ø±ÙˆØ²Ù‡Ø§ÛŒ Ø¯ÙˆØ§Ù…</div>
                <div class="final-stat-value">{{ game['turn'] }}</div>
            </div>
            <div class="final-stat">
                <div class="final-stat-label">ğŸ’° Ø¨ÙˆØ¯Ø¬Ù‡ Ù†Ù‡Ø§ÛŒÛŒ</div>
                <div class="final-stat-value" style="color: var(--accent-red);">{{ game['budget'] }}$</div>
            </div>
            <div class="final-stat">
                <div class="final-stat-label">â­ Ø´Ù‡Ø±Øª Ù†Ù‡Ø§ÛŒÛŒ</div>
                <div class="final-stat-value" style="color: var(--accent-red);">{{ game['reputation'] }}%</div>
            </div>
            <div class="final-stat">
                <div class="final-stat-label">â¤ï¸ Ø±ÙˆØ­ÛŒÙ‡ Ù†Ù‡Ø§ÛŒÛŒ</div>
                <div class="final-stat-value" style="color: var(--accent-red);">{{ game['morale'] }}%</div>
            </div>
        </div>

        <div class="lessons-learned">
            <div class="lessons-title">ğŸ’¡ Ø¯Ø±Ø³â€ŒÙ‡Ø§ÛŒ Ø¢Ù…ÙˆØ®ØªÙ‡ Ø´Ø¯Ù‡:</div>
            <div class="lessons-text">
                Ù‡Ø± Ø´Ú©Ø³Øª ÛŒÚ© ÙØ±ØµØª ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ø§Ø³Øª! Ø¯Ø± Ø¨Ø§Ø²ÛŒ Ø¨Ø¹Ø¯ÛŒØŒ ØªØµÙ…ÛŒÙ…â€ŒÙ‡Ø§ÛŒ Ø¨Ù‡ØªØ±ÛŒ Ø®ÙˆØ§Ù‡ÛŒØ¯ Ú¯Ø±ÙØª.
                Ø§ÛŒÙ† ØªØ¬Ø±Ø¨Ù‡ Ø¨Ù‡ Ø´Ù…Ø§ Ú©Ù…Ú© Ù…ÛŒâ€ŒÚ©Ù†Ø¯ ØªØ§ Ø¯Ø± Ø¯Ù†ÛŒØ§ÛŒ ÙˆØ§Ù‚Ø¹ÛŒØŒ Ø§Ø² Ø§Ø´ØªØ¨Ø§Ù‡Ø§Øª Ù…Ø´Ø§Ø¨Ù‡ Ø§Ø¬ØªÙ†Ø§Ø¨ Ú©Ù†ÛŒØ¯.
            </div>
        </div>

        <div class="restart-button">
            <a href="/" class="btn-primary" style="text-decoration: none; display: inline-block;">
                ğŸ”„ Ø´Ø±ÙˆØ¹ Ø¯ÙˆØ¨Ø§Ø±Ù‡
            </a>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Animate final stats
            const finalStats = document.querySelectorAll(".final-stat-value");
            finalStats.forEach(stat => {
                const finalValue = stat.textContent;
                const numericValue = parseInt(finalValue.replace(/[^0-9]/g, ''));
                if (!isNaN(numericValue)) {
                    let current = 0;
                    const increment = numericValue / 30;
                    const timer = setInterval(() => {
                        current += increment;
                        if (current >= numericValue) {
                            stat.textContent = finalValue;
                            clearInterval(timer);
                        } else {
                            stat.textContent = finalValue.replace(numericValue, Math.floor(current));
                        }
                    }, 40);
                }
            });

            // Entrance animations
            const container = document.querySelector(".game-over-container");
            container.style.opacity = "0";
            container.style.transform = "scale(0.9)";
            
            setTimeout(() => {
                container.style.transition = "all 0.5s ease";
                container.style.opacity = "1";
                container.style.transform = "scale(1)";
            }, 100);

            // Button animation
            const button = document.querySelector(".btn-primary");
            button.style.opacity = "0";
            setTimeout(() => {
                button.style.transition = "all 0.5s ease";
                button.style.opacity = "1";
            }, 800);
        });
    </script>
</body>
</html>
